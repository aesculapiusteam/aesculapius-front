"use strict";angular.module("aesculapiusFrontApp",["ngMessages","ngRoute","ngMaterial","mdDataTable","restangular"]).config(["$httpProvider","RestangularProvider","$mdDateLocaleProvider",function(a,b,c){a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken";var d="https://aesculapius.pythonanywhere.com/api/";b.setBaseUrl(d),b.addResponseInterceptor(function(a,b){if("getList"===b&&a.results){var c=a.results;c.count=a.count,a=c}return a}),c.formatDate=function(a){return a?moment(a).format("DD/MM/YYYY"):""}}]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/employees",{templateUrl:"views/employees.html",controller:"EmployeesCtrl",controllerAs:"employees"}).when("/profiles",{templateUrl:"views/profiles.html",controller:"ProfilesCtrl",controllerAs:"profiles"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl",controllerAs:"history"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).when("/stock",{templateUrl:"views/stock.html",controller:"StockCtrl",controllerAs:"stock"}).when("/drug",{templateUrl:"views/drug.html",controller:"DrugCtrl",controllerAs:"drug"}).when("/visit",{templateUrl:"views/visit.html",controller:"VisitCtrl",controllerAs:"visit"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/newvisit",{templateUrl:"views/newvisit.html",controller:"NewvisitCtrl",controllerAs:"newvisit"}).when("/movements",{templateUrl:"views/movements.html",controller:"MovementsCtrl",controllerAs:"movements"}).when("/movement",{templateUrl:"views/movement.html",controller:"MovementCtrl",controllerAs:"movement"}).otherwise({redirectTo:"/login"})}]).run(["$rootScope","auth","aeData","$mdDialog","$mdToast","Restangular",function(a,b,c,d,e,f){a.loading=!0,a.$on("$routeChangeStart",function(){a.loading=!0}),a.$on("$routeChangeSuccess",function(){a.loading=!1}),b.autoLogin(),a.showDialog=function(a,b,e){b&&(b.value||0===b.value)?e||(c[a.currentTarget.id+"s"]?c[a.currentTarget.id]=c[a.currentTarget.id+"s"].get(b.value).$object:c[a.currentTarget.id]=f.one(a.currentTarget.id+"s",b.value).get().$object):c[a.currentTarget.id]=null;var g;"employee"===a.currentTarget.id&&(g="profile"),c.selected=a.currentTarget.id,d.show({controller:_.capitalize(g||a.currentTarget.id)+"Ctrl",controllerAs:g||a.currentTarget.id,templateUrl:"views/"+(g||a.currentTarget.id)+".html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,escapeToClose:!0,onRemoving:function(){c.isConfirmThere||(b&&(b.value||0===b.value)?c.onDialogClose(c[a.currentTarget.id],a.currentTarget.id,b.value):c.onDialogClose(c[a.currentTarget.id],a.currentTarget.id))}})},a.showConfirm=function(b,f,g){var h="",i="",j="",k="",l="";switch(c.dialogInfo=b,g){case"close":i="Salir de todos modos",j="Seguir editando",h="Hay modificaciones sin guardar. Si sale ahora perderá todos los cambios.";break;case"delete":i="Eliminar",j="Cancelar",f[0].name?(l=1===f.length?" este será removido":", estos serán removidos",h="Al eliminar "+c.itemsInText(f)+l+" permanentemente del sistema.",k=c.itemsInText(f)+" eliminados con exito!"):f[0].first_name||f[0].profile?(h="Al eliminar a "+c.nameOf(f[0])+", este no aparecerá más en el sistema, sin embargo podrá ser restaurado luego.",k=c.nameOf(f[0])+" eliminado con exito!"):(h="Al eliminar la visita de "+f[0].patient_name+", esta no aparecerá más en el sistema, sin embargo podrá ser restaurado luego.",k="Visita de "+f[0].patient_name+" eliminada con exito!")}c.isConfirmThere=!0;var m=d.confirm().title(h).textContent("").ariaLabel("confirm-dialog").ok(i).cancel(j);d.show(m).then(function(){if(c.isConfirmThere=!1,"delete"===g)for(var b=function(b){f[b].remove().then(function(){c.reloadSelectedTable(),e.show(e.simple().textContent(k).position("bottom right").hideDelay(3e3))},function(b){a.showActionToast("Lamentablemente hubo un error al eliminar "+c.itemsInText(f),"error",b)})},d=0;d<f.length;d++)b(d)},function(){c.isConfirmThere=!1,c.dialogInfo&&a.showDialog({currentTarget:{id:c.dialogInfo[0]}},{value:c.dialogInfo[1]},!0),c.reloadSelectedTable()})},a.showAlert=function(a){d.show(d.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Error").textContent(a).ariaLabel("Alert Dialog").ok("OK"))},a.showActionToast=function(b,c,d,f,g){var h=e.simple().textContent(b).position("bottom right").hideDelay(f||3e3);g||h.action(g||"VER").highlightAction(!0).highlightClass("md-primary"),e.show(h).then(function(b){"ok"===b&&("error"===c?a.showAlert(d.data&&d.data.detail||d):a.showDialog(c,d))})}}]).config(["$mdThemingProvider",function(a){a.definePalette("orangeModifiedA200",{50:"fff3e0",100:"ffe0b2",200:"ffcc80",300:"ffb74d",400:"ffa726",500:"ff9800",600:"fb8c00",700:"f57c00",800:"ef6c00",900:"e65100",A100:"ffd180",A200:"ff9800",A400:"ff9100",A700:"ff6d00",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),a.theme("default").primaryPalette("blue").accentPalette("orangeModifiedA200").warnPalette("red")}]),angular.module("aesculapiusFrontApp").controller("BaseCtrl",["$scope","$location","auth","aeData","$rootScope","$mdMenu",function(a,b,c,d,e,f){a.me=d.me,a.goToDialog=function(b,c){e.showDialog(b,{value:a.me.id},c)},a.$on("setMe",function(){a.me=d.me}),a.logout=function(){c.logout(),b.path("/login")},a.mdCloseMenu=function(a){a&&f.hide()}}]),angular.module("aesculapiusFrontApp").controller("LoginCtrl",["$scope","$location","auth","$rootScope","$mdToast","Restangular","$routeParams","$timeout",function(a,b,c,d,e,f,g,h){window.localStorage.token&&b.path("/profiles"),a.credentials={username:"",password:""};var i={username:"test_doctor",password:"test_doctor"},j={username:"test_secretary",password:"test_secretary"};a.logIn=function(){d.loading=!0,(_.isEqual(a.credentials,i)||_.isEqual(a.credentials,j))&&f.setBaseUrl("https://aesculapiusdev.pythonanywhere.com/api/"),c.token(a.credentials).then(function(){d.loading=!1,b.path("/profiles")},function(a){d.loading=!1,e.show(e.simple().textContent(a.data.non_field_errors[0]).position("bottom right").hideDelay(2e3))})},g.test&&(a.isTesting=!0),g.test_doctor?(a.isTesting=!0,h(function(){a.credentials=i},1e3),h(a.logIn,2e3)):g.test_secretary&&(a.isTesting=!0,h(function(){a.credentials=j},1e3),h(a.logIn,2e3)),a.testAs=function(b){"doctor"===b?(a.credentials=i,h(a.logIn,250)):"secretary"===b&&(a.credentials=j,h(a.logIn,250))}}]),angular.module("aesculapiusFrontApp").controller("VisitCtrl",["$scope","$mdDialog","Restangular","aeData","$mdToast","$rootScope",function(a,b,c,d,e,f){a.enable=!0,a.visit=d.visit,a.$watch("visitForm",function(){d.form=a.visitForm,d.form&&d.isDirty(a.visit)}),a.cancel=function(){b.cancel()},a.edit=function(){a.enable=!a.enable},a["delete"]=function(){f.showConfirm(["consult",a.visit.id],[a.visit],"delete")},a.save=function(){a.visitForm.$submitted=!0;var e=a.visit.detail,g=a.visit.datetime;a.visit.datetime=new Date,c.copy(a.visit).save().then(function(a){f.showActionToast("Consulta guardada con exito!",{currentTarget:{id:"visit"}},{value:a.id}),b.cancel(),d.reloadHistoryTable()},function(c){a.visit.detail=e,a.visit.datetime=g,b.cancel(),f.showActionToast("Lamentablemente hubo un error al editar la consulta.","error",c)})}}]),function(){angular.module("aesculapiusFrontApp").controller("EmployeesCtrl",["$scope","$timeout","Restangular","aeData",function(a,b,c,d){a.filterText="";var e,f=c.all("employees");a.$watch("filterText",function(){e&&e()}),a.getLoadResultsCallback=function(a){e=_.debounce(a,1e3),d.reloadEmployeesTable=a},a.refreshTable=function(b,c){var e=(b-1)*c;return f.getList({search:a.filterText,limit:c,offset:e}).then(function(a){return d.employees=a,{results:a,totalResultCount:a.count}})},a.toggleMobileSearch=function(){this.showMobileSearch=!this.showMobileSearch,this.showMobileSearch&&b(function(){angular.element("#mobileSearch").focus()}),this.filterText=""}}])}(),function(){angular.module("aesculapiusFrontApp").controller("ProfilesCtrl",["$scope","$location","$timeout","Restangular","aeData",function(a,b,c,d,e){a.filterText="",a.showMobileSearch=!1;var f,g=d.all("profiles");a.$watch("filterText",function(){f&&f()}),a.getLoadResultsCallback=function(a){f=_.debounce(a,1e3),e.reloadProfilesTable=a},a.refreshTable=function(b,c){var d=(b-1)*c;return g.getList({search:a.filterText,limit:c,offset:d}).then(function(a){return e.profiles=a,{results:a,totalResultCount:a.count}})},a.cHistory=function(a){e.historyId=a.currentTarget.parentElement.parentElement.parentElement.children[4].children[0].children[0].attributes[1].nodeValue,b.path("history")},a.toggleMobileSearch=function(){this.showMobileSearch=!this.showMobileSearch,this.showMobileSearch&&c(function(){angular.element("#mobileSearch").focus()}),this.filterText=""}}])}(),angular.module("aesculapiusFrontApp").controller("HistoryCtrl",["$scope","Restangular","aeData","$location","$rootScope",function(a,b,c,d,e){c.historyId||d.path("profiles"),b.one("profiles",String(c.historyId)).get().then(function(b){return a.patientName=c.nameOf(b),a.patientId=b.id,a.patientName}),a.getLoadResultsCallback=function(a){c.reloadHistoryTable=a},a.getData=function(a,d){var e=(a-1)*d;return b.all("visits").getList({patient:c.historyId,limit:d,offset:e}).then(function(a){return c.visits=a,{results:a,totalResultCount:a.count}})},a.goToDialog=function(a,d,f){b.one("visits",a).get().then(function(a){return c.visit=a,e.showDialog(d,f),a})},a.idOfDoctor=function(a){return _.find(c.visits,{id:a}).doctor},a.goToProfiles=function(){d.path("profiles")}}]),angular.module("aesculapiusFrontApp").controller("ProfileCtrl",["$scope","$mdDialog","$rootScope","aeData","Restangular","$mdToast",function(a,b,c,d,e,f){a.person={},d[d.selected]?(a.person=d[d.selected],d[d.selected].id&&(a.nullProfile=!1)):(d[d.selected]=a.person,a.nullProfile=!0),a.isEmployeeForm="employee"===d.selected,a.isEmployeeForm?(a.toastId="employee",a.allEmployees=e.all("employees").getList().$object,a.person.repeatPassword="",a.person.assist_ed=a.person.assist_ed||[],a.person.charge=a.person.charge||"secretary"):a.toastId="profile",a.$watch("profileForm",function(){d.form=a.profileForm,d.form&&a.person&&d.isDirty(a.person)});var g=a.$watch("person",function(b){_.isEmpty(b)||(a.person.profile&&a.person.profile.birth_date?a.person.profile.age=moment().diff(a.person.profile.birth_date,"years"):a.person.birth_date&&(a.person.age=moment().diff(a.person.birth_date,"years")),g())},!0);a.add=function(){return a.isEmployeeForm&&!a.passwordsMatch()?void f.show(f.simple().textContent("Debe escribir dos veces su nueva contraseña y deben coincidir.").position("bottom right").hideDelay(2e3)):void e.all(d.selected+"s").post(a.person).then(function(b){a.cancel(),a.personName=d.nameOf(b),c.showActionToast(a.personName+" ha sido añadido.",{currentTarget:{id:a.toastId}},{value:b.id}),c.$broadcast("profileAdded",{person:b}),d.reloadSelectedTable()},function(a){c.showActionToast("Lamentablemente hubo un error al añadir la pesona.","error",a)})},a.save=function(){if(a.person.profile?a.person.profile.birth_date=moment().subtract(a.person.profile.age,"years").format("YYYY-MM-DD"):a.person.birth_date=moment().subtract(a.person.age,"years").format("YYYY-MM-DD"),a.profileForm.$submitted=!0,d[d.selected].id){if(a.isEmployeeForm&&!a.passwordsMatch(!0))return void f.show(f.simple().textContent("Debe escribir dos veces su nueva contraseña y deben coincidir.").position("bottom right").hideDelay(2e3));a.person.password||delete a.person.password,e.copy(a.person).save().then(function(b){a.cancel(),a.personName=d.nameOf(b),c.showActionToast(a.personName+" ha sido modificado.",{currentTarget:{id:a.toastId}},{value:b.id}),d.reloadSelectedTable()},function(a){c.showActionToast("Lamentablemente hubo un error al modificar la informacion.","error",a)})}else this.add()},a["delete"]=function(){a.isEmployeeForm?(a.id=a.person.profile.id,a.proOrEm="employee"):(a.id=a.person.id,a.proOrEm="profile"),c.showConfirm([a.proOrEm,a.id],[a.person],"delete")},a.cancel=function(){b.cancel()},a.assistEdSelection=function(b){a.profileForm.$pristine=!1;var c=a.person.assist_ed.indexOf(b);c>-1?a.person.assist_ed.splice(c,1):a.person.assist_ed.push(b)},a.isChecked=function(b){return a.person.assist_ed.indexOf(b)>-1},a.shouldBeAssistedBy=function(a){return"doctor"===a?"secretary":"doctor"},a.isNew=function(){return a.nullProfile||!a.person.id},a.passwordsMatch=function(b){var c=a.person.repeatPassword,d=a.person.password&&a.person.repeatPassword&&a.person.repeatPassword===a.person.password;return b?(c||(a.person.password=""),!c||d):d}}]),angular.module("aesculapiusFrontApp").service("auth",["Restangular","$rootScope","aeData",function(a,b,c){this.tokenAuthUrl="token-auth/",this.setMe=function(){a.all("employees").get("me").then(function(a){c.me=a,b.$broadcast("setMe")},function(a){console.error("Hubo un error al cargar el perfil del usuario logueado"),console.error(a)})},this.token=function(c){var d=this;if(c.username&&c.password)return a.all(this.tokenAuthUrl).post(c).then(function(c){return b.authenticated=!0,a.setDefaultHeaders({Authorization:"Token "+c.token}),window.localStorage.token=c.token,d.setMe(),c});throw new Error("You must provide a credentials object with username and password fields to auth.token()")},this.autoLogin=function(){return window.localStorage.token?(b.authenticated=!0,a.setDefaultHeaders({Authorization:"Token "+window.localStorage.token}),this.setMe(),!0):!1},this.logout=function(){delete window.localStorage.token,b.authenticated=!1,a.setDefaultHeaders({})}}]),angular.module("aesculapiusFrontApp").directive("mdtButton",function(){return{restrict:"EA",template:'<md-button class="md-primary"><md-icon>{{icon}}</md-icon>{{text}}</md-button>',link:function(a,b,c){a.icon=c.icon,a.text=c.text}}}),angular.module("aesculapiusFrontApp").directive("aeProfileIcon",function(){var a=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],b=function(b){if(b){for(var c=b.length,d=0;d<b.length;d++)c+=b.charCodeAt(d);return a[c%a.length]}};return{template:'<div md-ink-ripple="{{ripple}}"><div class="unselectable {{classes}}" style="cursor:pointer; margin:8px; width:{{size}}px; height:{{size}}px; background-color:{{color}}; float:left; border-radius:50%; color:white; font-size:{{size/2}}px; text-align:center; line-height:{{size}}px;">{{letter}}</div><md-tooltip md-delay="500">{{name}}</md-tooltip></div>',restrict:"E",scope:{letter:"@"},link:function(a,c,d){a.size=d.size||32,a.letter=d.letter||(d.name+"?").charAt(0).toUpperCase(),a.color=d.color||b(d.name||d.letter),a.name="",a.classes=d.classes,a.ripple=!1,a.nonclick=d.nonclick||!1,"charge"!==d.type&&d.id?(a.classes="hoverable-shadow hoverable unselectable "+a.classes,a.ripple=a.color,a.nonclick||c.bind("click",function(){var b={currentTarget:{id:d.type||"profile"}},c={value:d.id};a.$root.showDialog(b,c)})):"doctor"===d.name?(a.name="Doctor/a",a.color="#2196f3"):"secretary"===d.name&&(a.name="Secretario/a",a.color="#ff9800")}}}),angular.module("aesculapiusFrontApp").service("aeData",["$rootScope",function(a){this.me=null,this.aesculapius=null,this.selected=null,this.profile=null,this.profiles=null,this.employee=null,this.employees=null,this.drug=null,this.drugs=null,this.visits=null,this.pos=null,this.dialogInfo=null,this.form=null,this.isConfirmThere=null,this.visit=null,this.reloadHistoryTable=null,this.reloadEmployeesTable=null,this.reloadProfilesTable=null,this.reloadStockTable=null,this.historyId=null,this.reloadSelectedTable=function(){switch(this.selected){case"profile":return this.reloadProfilesTable();case"employee":return this.reloadEmployeesTable();case"drug":return this.reloadStockTable();case"visit":return this.reloadHistoryTable();default:return!1}},this.itemsInText=function(a){var b="",c=[];a.length>1&&(b=" y "+a[a.length-1].name,a=a.slice(0,-1));for(var d=0;d<a.length;d++)c.push(a[d].name);return c.join(", ")+b},this.onDialogClose=function(b,c,d){d=d||0,this.form.$dirty&&!this.form.$submitted&&(a.showConfirm([c,d],b,"close"),b.isDirty=!0)},this.isDirty=function(a){a.isDirty&&(this.form.$pristine=!1)},this.nameOf=function(a){return a.last_name?a.first_name+" "+a.last_name:a.profile?a.profile.last_name?a.profile.first_name+" "+a.profile.last_name:a.profile.first_name:a.first_name},this.getSelected=function(){return this[this.selected]}}]),function(){angular.module("aesculapiusFrontApp").controller("StockCtrl",["$scope","$rootScope","$mdDialog","$timeout","Restangular","aeData",function(a,b,c,d,e,f){f.selected="drug",a.filterText="";var g,h=e.all("drugs");a.$watch("filterText",function(){g&&g()}),a.getLoadResultsCallback=function(a){g=_.debounce(a,1e3),f.reloadStockTable=a},a.refreshTable=function(b,c){var d=(b-1)*c;return h.getList({search:a.filterText,limit:c,offset:d}).then(function(a){return f.drugs=a,{results:a,totalResultCount:a.count}})},f.reloadStockTable=function(){a.refreshTable()},a.deleteRowCallback=function(a){for(var c=[],d=0;d<a.length;d++)for(var e=0;e<f.drugs.length;e++)if(f.drugs[e].id===a[d]){c.push(f.drugs[e]);break}b.showConfirm(null,c,"delete",f.reloadStockTable)},a.toggleMobileSearch=function(){this.showMobileSearch=!this.showMobileSearch,this.showMobileSearch&&d(function(){angular.element("#mobileSearch").focus()}),this.filterText=""}}])}(),function(){angular.module("aesculapiusFrontApp").controller("DrugCtrl",["$scope","$rootScope","$mdDialog","Restangular","aeData",function(a,b,c,d,e){e.drug?(a.drug=e.drug,e.drug.id&&(a.nullDrug=!1)):(e.drug=a.drug,a.nullDrug=!0),a.$watch("drugForm",function(){e.form=a.drugForm,e.form&&a.drug&&e.isDirty(a.drug)}),a.add=function(){d.all("drugs").post(a.drug).then(function(c){a.cancel(),b.showActionToast(a.drug.name+" ha sido añadido.",{currentTarget:{id:"drug"}},{value:c.id}),b.$broadcast("drugAdded",{drug:c}),e.reloadStockTable()},function(a){b.showActionToast("Lamentablemente hubo un error al añadir el Medicamento.","error",a)})},a.save=function(){a.drugForm.$submitted=!0,e.drug.id?d.copy(a.drug).save().then(function(c){a.cancel(),b.showActionToast(a.drug.name+" ha sido modificado.",{currentTarget:{id:"drug"}},{value:c.id}),e.reloadStockTable()},function(a){b.showActionToast("Lamentablemente hubo un error al editar el Medicamento.","error",a)}):this.add()},a["delete"]=function(){b.showConfirm(["drug",a.drug.id],[a.drug],"delete")},a.cancel=function(){c.cancel()},a.isNew=function(){return a.nullDrug||!a.drug.id}}])}(),angular.module("aesculapiusFrontApp").controller("RegisterCtrl",["$scope","Restangular","$mdToast","aeData","$rootScope","$location","$timeout","$anchorScroll",function(a,b,c,d,e,f,g,h){a.detail="",a.selectedItemPeople="",a.nActions=[{capital:"",drug:"",quantity:"",detail:"",type:""}];var i=b.all("profiles"),j=b.all("drugs");a.itemText=function(a){return d.nameOf(a)},a.done=function(){for(var c=[],f=0;f<a.nActions.length;f++){var g={};g.detail=a.nActions[f].detail,g.movement_type=parseInt(a.nActions[f].capital),0===g.movement_type?(g.drug=a.nActions[f].drug.id,g.drug_quantity=parseInt(a.nActions[f].quantity)):g.cash=parseFloat(a.nActions[f].quantity).toFixed(2),g.is_donation=!!parseInt(a.nActions[f].type),c.push(g),a.nActions[f].drug.quantity-parseInt(a.nActions[f].quantity)<0&&!g.is_donation&&e.showActionToast("No tienes esta cantidad de "+a.nActions[f].drug.name+". Revisa el Stock",{currentTarget:{id:"drug"}},{value:a.nActions[f].drug.id})}var h={profile:a.selectedItemPeople.id,items:c};b.all("movements").post(h).then(function(c){d.movement=c,b.all("movements").getList().then(function(a){d.movements=a,e.showActionToast("Todas las acciones se han completado",{currentTarget:{id:"movement"}},{value:d.movement.id})}),a.cancel()},function(a){e.showActionToast("Hubo un error al intentar completar el proceso.","error",a)})},a.showOrHide=function(a){return"0"===a?!1:!0},a.peopleList=function(){return i.getList({search:a.filterTextP,limit:3}).then(function(a){return a.push(" "),a})},a.drugList=function(){return j.getList({search:this.filterTextM,limit:3}).then(function(a){return a.push(" "),a})},a.addAction=function(){a.nActions.push({capital:"",drug:"",quantity:"",detail:"",type:""}),g(function(){h("bottom")})},a.deleteAction=function(b){a.nActions.length>1&&a.nActions.splice(a.nActions.indexOf(b),1)},a.cancel=function(){a.registerForm.capital.$touched=!1,a.registerForm.drug&&(a.registerForm.drug.$touched=!1),a.registerForm.person.$touched=!1,a.registerForm.type.$touched=!1,a.registerForm.quantity.$touched=!1,a.selectedItemPeople=null,a.nActions=[{capital:"",drug:"",quantity:"",detail:"",type:""}]},a.goToDialog=function(a,b){d.pos=b,e.showDialog(a)},a.goToMovements=function(){f.path("movements")},a.$on("drugAdded",function(b,c){a.drugList(),a.nActions[d.pos].drug=c.drug}),a.$on("profileAdded",function(b,c){a.peopleList(),a.selectedItemPeople=c.person})}]),angular.module("aesculapiusFrontApp").controller("NewvisitCtrl",["$scope","Restangular","$mdToast","$rootScope","aeData",function(a,b,c,d,e){var f=b.all("profiles"),g=b.all("visits");a.date=new Date,a.peopleList=function(){return f.getList({search:a.filterTextP,limit:3}).then(function(a){return a.push(" "),a})},a.itemText=function(a){return e.nameOf(a)},a.cancel=function(){a.detail="",a.selectedItemPeople="",a.filterTextP="",a.newVisitForm.detail.$touched=!1,a.newVisitForm.person.$touched=!1},a.$on("profileAdded",function(b,c){a.peopleList(),a.selectedItemPeople=c.person}),a.goToDialog=function(a,b){var c={value:b};d.showDialog(a,c)},a.done=function(){var b={patient:a.selectedItemPeople.id,detail:a.detail};g.post(b).then(function(b){var c="Nueva consulta añadida a la Historia Clinica de "+b.patient_name;e.visit=b,d.showActionToast(c,{currentTarget:{id:"visit"}},{value:b.id},5e3),a.cancel()},function(b){b.data.patient?d.showActionToast("Hubo un error al realizar la consulta","error","El paciente es inexistente."):d.showActionToast("Hubo un error al realizar la consulta","error",b),a.cancel()})}}]),angular.module("aesculapiusFrontApp").controller("MovementsCtrl",["$scope","$timeout","Restangular","$rootScope","aeData","$location",function(a,b,c,d,e,f){var g,h=c.all("movements");a.filterText="",a.yearFilter="",a.monthFilter="",a.dateFilter="",a.fixedFormat="",a.fullFilter=a.filterText+" "+a.yearFilter+" "+a.monthFilter+" "+a.fixedFormat,a.aesculapius=e.aesculapius=c.one("aesculapius","current").get().$object,a.idOfProfile=function(a){return _.find(e.movements,{id:a}).profile},a.idOfEmployee=function(a){return _.find(e.movements,{id:a}).employee},a.getTableData=function(b){a.tableData=b,e.movements=b;for(var c=0;c<b.length;c++){a.tableData[c].totalCashIn=null,a.tableData[c].totalCashOut=null,a.tableData[c].totalDrugsIn=null,a.tableData[c].totalDrugsOut=null;for(var d=0;d<b[c].items.length;d++)b[c].items[d].movement_type?b[c].items[d].is_donation?a.tableData[c].totalCashIn+=parseFloat(b[c].items[d].cash):a.tableData[c].totalCashOut+=parseFloat(b[c].items[d].cash):b[c].items[d].is_donation?a.tableData[c].totalDrugsIn+=b[c].items[d].drug_quantity:a.tableData[c].totalDrugsOut+=b[c].items[d].drug_quantity;a.tableData[c].totalCashIn&&(a.tableData[c].totalCashIn=a.tableData[c].totalCashIn.toFixed(2)),a.tableData[c].totalCashOut&&(a.tableData[c].totalCashOut=a.tableData[c].totalCashOut.toFixed(2))}return a.tableData},a.$watch("dateFilterSelect",function(){a.yearFilter="",a.monthFilter="",a.dateFilter="",a.fixedFormat=""}),a.goToRegister=function(){f.path("register")},a.$watch("filterText",function(){g&&g()}),a.$watch("yearFilter",function(){g&&g()}),a.$watch("monthFilter",function(){g&&g()}),a.$watch("dateFilter",function(){""!==a.dateFilter&&(a.fixedFormat=a.dateFilter.getFullYear()+" "+parseInt(a.dateFilter.getMonth()+1)+" "+a.dateFilter.getDate()),g&&g()}),a.getLoadResultsCallback=function(a){g=_.debounce(a,1e3)},a.refreshTable=function(b,c){var d=(b-1)*c;return h.getList({search:a.filterText+" "+a.yearFilter+" "+a.monthFilter+" "+a.fixedFormat,limit:c,offset:d}).then(function(b){return{results:a.getTableData(b),totalResultCount:b.count}})},a.toggleMobileSearch=function(){this.showMobileSearch=!this.showMobileSearch,this.showMobileSearch&&b(function(){angular.element("#mobileSearch").focus()}),this.filterText=""}}]),angular.module("aesculapiusFrontApp").controller("MovementCtrl",["$scope","aeData","$mdDialog",function(a,b,c){a.movement=b.movement,a.cancel=function(){c.cancel()}}]),angular.module("aesculapiusFrontApp").directive("capitalizeFirst",["$parse",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=function(a){void 0===a&&(a="");var b=a.charAt(0).toUpperCase()+a.substring(1);return b!==a&&(e.$setViewValue(b),e.$render()),b};e.$parsers.push(f),f(a(d.ngModel)(b))}}}]),angular.module("aesculapiusFrontApp").controller("IssueCtrl",["$scope","$rootScope","$mdDialog","Restangular","aeData",function(a,b,c,d){a.cancel=function(){c.cancel()},a.save=function(){a.issueForm.$submitted=!0,d.all("issues").post(a.issue).then(function(a){b.showActionToast("¡Gracias por la sugerencia!",{currentTarget:{id:"issue"}},{value:a.id},3e3,!0),c.cancel()},function(a){c.cancel(),b.showActionToast("Lamentablemente hubo un error al editar la consulta.","error",a)})}}]),angular.module("aesculapiusFrontApp").run(["$templateCache",function(a){a.put("views/drug.html",'<md-dialog> <div layout="row"> <md-toolbar layout="row"> <div class="md-toolbar-tools"> {{isNew() ? \'Agregar Medicamento\' : \'Editar Medicamento\'}} </div> <div class="dialog-close"> <md-button ng-click="cancel()" class="md-icon-button"> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> </div> <md-divider></md-divider> <md-dialog-content class="md-padding" layout="column"> <div layout="column" layout-padding ng-cloak> <form name="drugForm" ng-submit="save()" novalidate> <div layout="column"> <md-input-container> <label>Nombre del Medicamento</label> <md-icon class="md-primary">healing</md-icon> <input name="name" ng-model="drug.name" required md-maxlength="256"> <div ng-messages="drugForm.name.$error"> <div ng-message="required">Este campo es obligatorio.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Cantidad</label> <md-icon class="md-primary">vertical_align_center</md-icon> <input name="quantity" type="number" required ng-model="drug.quantity"> <div ng-messages="drugForm.quantity.$error"> <div ng-message="number">Ingrese solo números enteros</div> <div ng-message="required">Este campo es obligatorio</div> </div> </md-input-container> <md-input-container> <label>Detalle</label> <md-icon class="md-primary">content_paste</md-icon> <textarea name="description" ng-model="drug.description"></textarea> </md-input-container> </div> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!-- TODO it is removed from preventing a bug. check out trello. <md-button class="md-warn" ng-hide="isNew()" ng-click="delete()" layout-align="start center">\n      <label>Eliminar</label>\n      <md-icon>delete</md-icon>\n    </md-button> --> <md-button ng-click="cancel()" layout-align="end center"> <label>Cancelar</label> <md-icon>cancel</md-icon> </md-button> <md-button class="md-primary" ng-click="save()" ng-disabled="drugForm.$invalid||drugForm.$pristine" layout-align="end center"> <label>Guardar</label> <md-icon>save</md-icon> </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/employees.html",'<div class="employeesTable"> <div ng-hide="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">format_list_bulleted</md-icon> <span class="truncate-xs filter-header"><span hide show-gt-xs>Lista de</span> Colaboradores</span> <span flex></span> <div class="filter-search" layout="row" hide show-gt-xs> <md-icon>search</md-icon> <md-input-container md-no-float class="md-toolbar-tools"> <input flex ng-model="filterText" placeholder="Buscar colaboradores..." type="text"> </md-input-container> </div> <md-button hide show-xs class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>search</md-icon> <md-tooltip md-delay="500">Busca un colaborador</md-tooltip> </md-button> <md-button class="filter-button md-primary" id="employee" ng-click="$root.showDialog($event)"> <md-icon>person_add</md-icon> <md-tooltip md-delay="500">Agrega un nuevo colaborador</md-tooltip> </md-button> </div> </div> <div ng-show="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-search-icon">search</md-icon> <md-input-container md-no-float class="md-toolbar-tools md-input-container-xs"> <input id="mobileSearch" flex ng-model="filterText" placeholder="Buscar" type="text"> </md-input-container> <md-button class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>close</md-icon> <md-tooltip md-delay="500">Cancelar busqueda</md-tooltip> </md-button> </div> </div> <mdt-table sortable-columns="true" animate-sort-icon="true" paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,50]}" mdt-row-paginator="refreshTable(page, pageSize)" mdt-row-paginator-error-message="Hubo un error al cargar los colaboradores." mdt-row-paginator-no-results-message="No hubo resultados de la busqueda." mdt-trigger-request="getLoadResultsCallback(loadPageCallback)" mdt-translations="{\n    \'rowsPerPage\': \'Filas:\'\n    }" mdt-row="{\n    \'table-row-id-key\': \'id\',\n    \'column-keys\': [\n    \'profile.first_name\',\n    \'profile.last_name\',\n    \'charge\',\n    \'profile.email\',\n    \'id\'\n    ],\n  }"> <mdt-header-row> <mdt-column align-rule="left">Nombre</mdt-column> <mdt-column align-rule="left">Apellido</mdt-column> <mdt-column align-rule="left">Tipo</mdt-column> <mdt-column align-rule="left">Email</mdt-column> <mdt-column align-rule="left">Editar</mdt-column> </mdt-header-row> <mdt-custom-cell column-key="profile.first_name"> <ae-profile-icon id="{{rowId}}" name="{{value}}" type="employee" size="32"></ae-profile-icon> <span class="height-48">{{value}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="charge"> <ae-profile-icon name="{{value}}" size="32" type="charge"></ae-profile-icon> </mdt-custom-cell> <mdt-custom-cell column-key="id"> <mdt-button id="employee" value="{{value}}" ng-click="$root.showDialog($event, this)" icon="edit"></mdt-button> </mdt-custom-cell> </mdt-table> </div>'),a.put("views/history.html",'<div class="historyTable"> <div class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">format_list_bulleted</md-icon> <ae-profile-icon hide show-gt-xs style="padding-left:1rem" ng-if="patientName" name="{{patientName}}" size="64" id="{{patientId}}"></ae-profile-icon> <span class="truncate-ellipsis-xs filter-header"><span hide show-gt-xs>Historia Clínica de </span>{{patientName}}</span> <span flex></span> <md-button class="filter-button md-primary" ng-click="goToProfiles()"> <md-icon>arrow_back</md-icon> <md-tooltip md-delay="500">Volver la lista de pacientes</md-tooltip> </md-button> </div> </div> <mdt-table sortable-columns="true" animate-sort-icon="true" paginated-rows="{isEnabled: true, rowsPerPageValues: [5, 10,20,50]}" mdt-row-paginator="getData(page, pageSize)" mdt-row-paginator-error-message="Hubo un error al cargar la historia clínica." mdt-row-paginator-no-results-message="Este paciente no ha realizado ninguna consulta." mdt-trigger-request="getLoadResultsCallback(loadPageCallback)" mdt-translations="{\n    \'rowsPerPage\': \'Filas:\'\n    }" mdt-row="{\n      \'table-row-id-key\': \'id\',\n      \'column-keys\': [\n      \'datetime\',\n      \'doctor_name\',\n      \'detail\',\n      \'id\'\n      ],\n    }"> <mdt-header-row> <mdt-column align-rule="left">Fecha</mdt-column> <mdt-column align-rule="left">Médico</mdt-column> <mdt-column align-rule="left">Descripción</mdt-column> <mdt-column align-rule="left">Detalles</mdt-column> </mdt-header-row> <mdt-custom-cell column-key="doctor_name" aria-label="More"> <ae-profile-icon name="{{value}}" size="32" id="{{::clientScope.idOfDoctor(rowId)}}"></ae-profile-icon> <span class="height-48">{{value}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="detail" aria-label="More"> {{value| limitTo: 57}}{{value.length > 60? \'...\': \'\'}} </mdt-custom-cell> <mdt-custom-cell column-key="datetime" aria-label="More"> <span>{{value|date: \'shortDate\'}}</span><br> <span>{{value|date: \'shortTime\'}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="id" aria-label="More"> <mdt-button id="visit" ng-click="clientScope.goToDialog(value, $event, this)" icon="more"></mdt-button> </mdt-custom-cell> </mdt-table> </div>'),
a.put("views/issue.html",'<md-dialog> <div layout="row"> <md-toolbar layout="row"> <div class="md-toolbar-tools">Nueva Sugerencia</div> <div class="dialog-close"> <md-button ng-click="cancel()" class="md-icon-button"> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> </div> <md-divider></md-divider> <md-dialog-content layout="column" layout-padding flex> <form name="issueForm" submit="save()" novalidate> <md-input-container class="full-width"> <label>Título</label> <input name="title" type="text" ng-model="issue.title" md-maxlength="256" required> <div ng-messages="issueForm.title.$error"> <p ng-message="required">Este campo es obligatorio.</p> </div> </md-input-container> <md-input-container class="full-width"> <label>Contenido</label> <textarea name="content" type="text" ng-model="issue.content" required></textarea> <div ng-messages="issueForm.content.$error"> <p ng-message="required">Este campo es obligatorio.</p> </div> </md-input-container> </form> <small>Nota: por otras cuestiones puede enviar un email a aesculapiusdevteam@gmail.com</small> </md-dialog-content> <md-dialog-actions layout="row"> <md-button ng-click="cancel()" layout-align="end center"> <label>Cancelar</label> <md-icon>cancel</md-icon> </md-button> <md-button class="md-primary" ng-click="save()" ng-disabled="issueForm.$invalid || visissueForm.$pristine" layout-align="end center"> <label>Guardar</label> <md-icon>save</md-icon> </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/login.html",'<div layout="row" flex layout-align="center"> <form name="loginForm" ng-submit="logIn()" class="login-form pad-2" md-whiteframe="3" layout="column" layout-fill> <div layout="column" layout-align="center center"> <img src="images/logo_circle_shadow.6696ac83.png" alt="Aesculapius" class="login-logo"> <p ng-if="!isTesting" class="thin-text">Ingresa a Aesculapius <span hide-xs>- Santa María</span></p> <p ng-if="isTesting" class="thin-text center">Prueba Aesculapius<br>Como <a class="md-primary md-body-2 cursor-pointer" ng-click="testAs(\'doctor\')">doctor</a> o como <a class="md-primary md-body-2 cursor-pointer" ng-click="testAs(\'secretary\')">secretaria</a></p> </div> <md-input-container class="md-block no-margin-xs"> <md-icon class="md-primary">person</md-icon> <input name="username" ng-model="credentials.username" placeholder="Nombre de Usuario" required> <div ng-messages="loginForm.username.$error"> <div ng-message="required">El nombre de usuario es necesario</div> </div> </md-input-container> <md-input-container class="md-block no-margin-xs"> <md-icon class="md-primary">lock</md-icon> <input name="password" type="password" ng-model="credentials.password" placeholder="Contraseña" required> <div ng-messages="loginForm.password.$error"> <div ng-message="required">La contraseña es necesaria</div> </div> </md-input-container> <md-button type="submit" class="md-primary md-raised row-4" layout="row"> <md-icon layout>arrow_forward</md-icon> </md-button> </form> </div>'),a.put("views/movement.html",'<md-dialog> <div layout="row"> <md-toolbar layout="row"> <div class="md-toolbar-tools">{{movement.datetime|date: \'dd MMMM yyyy HH:mm\'}}</div> <div class="dialog-close"> <md-button ng-click="cancel()" class="md-icon-button"> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> </div> <md-divider></md-divider> <md-dialog-content class="md-padding" layout-xs="column" layout="row"> <div layout="column" layout-padding ng-cloak> <span>Paciente: <b>{{movement.profile_name}}</b></span> <span>Colaborador: <b>{{movement.employee_name}}</b></span> <div layout="row" layout-align="space-around center"> </div> <mdt-table mdt-row="{\n                            data: movement.items,\n                            \'column-keys\': [\n                                \'is_donation\',\n                                \'drug_name\',\n                                \'drug_quantity\',\n                                \'cash\',\n                                \'detail\'\n                              ]\n                            }"> <mdt-header-row> <mdt-column align-rule="left">Tipo</mdt-column> <mdt-column align-rule="right">Medicamento</mdt-column> <mdt-column align-rule="right">Cantidad</mdt-column> <mdt-column align-rule="right">Dinero</mdt-column> <mdt-column align-rule="left">Detalles</mdt-column> </mdt-header-row> <mdt-row> <mdt-custom-cell column-key="is_donation"> <span ng-show="{{value}}">Ingreso</span> <span ng-show="{{!value}}">Egreso</span> </mdt-custom-cell> <mdt-custom-cell column-key="cash"> <span ng-show="{{value}}">{{value| currency}}</span> </mdt-custom-cell> </mdt-row> </mdt-table> </div> </md-dialog-content> <md-dialog-actions layout="row"> <md-button ng-click="cancel()" class="md-raised md-primary" layout-align="end center"> <md-icon>done</md-icon> <label>Aceptar</label> </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/movements.html",'<div class="movementsTable"> <div ng-hide="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">format_list_bulleted</md-icon> <span class="truncate-ellipsis-xs filter-header">Movimientos</span> <span flex></span> <div class="filter-search" layout="row" hide show-gt-xs> <md-icon>search</md-icon> <md-input-container md-no-float class="md-toolbar-tools"> <input flex ng-model="filterText" placeholder="Buscar movimientos..." type="text"> </md-input-container> </div> <md-button hide show-xs class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>search</md-icon> <md-tooltip md-delay="500">Buscar movimientos</md-tooltip> </md-button> <md-button class="movements-money filter-button md-primary"> <span ng-if="aesculapius.balance">${{aesculapius.balance}}</span> <md-icon ng-if="!aesculapius.balance">autorenew</md-icon> <md-tooltip md-delay="500">{{aesculapius.balance ? \'Dinero en caja\' : \'Obteniendo dinero en caja...\'}}</md-tooltip> </md-button> <md-button class="filter-button md-primary" ng-click="goToRegister()"> <md-icon>arrow_back</md-icon> <md-tooltip md-delay="500">Volver a la caja</md-tooltip> </md-button> </div> </div> <div ng-show="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-search-icon">search</md-icon> <md-input-container md-no-float class="md-toolbar-tools md-input-container-xs"> <input id="mobileSearch" flex ng-model="filterText" placeholder="Buscar" type="text"> </md-input-container> <md-button class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>close</md-icon> <md-tooltip md-delay="500">Cancelar busqueda</md-tooltip> </md-button> </div> </div> <!-- <md-card class="no-margin" layout="column">\n    <md-input-container layout="row">\n      <md-icon>person</md-icon>\n      <label>Filtrar por Colaborador / Paciente / Donador</label>\n      <input flex ng-model="filterText" type="text">\n    </md-input-container>\n    <div layout="row">\n      <md-select ng-model="dateFilterSelect" placeholder="Filtro por fecha" class="md-no-underline" multiple>\n        <md-option value="1">Fecha</md-option>\n        <md-option value="2">Año</md-option>\n        <md-option value="3">Mes</md-option>\n      </md-select>\n      <md-input-container ng-show="dateFilterSelect.includes(\'2\') && !dateFilterSelect.includes(\'1\')">\n        <label>Año</label>\n        <input type="number" ng-model="yearFilter">\n      </md-input-container>\n      <md-input-container ng-show="dateFilterSelect.includes(\'3\') && !dateFilterSelect.includes(\'1\')">\n        <label>Mes</label>\n        <input type="number" ng-model="monthFilter">\n      </md-input-container>\n      <md-datepicker class="margin-20" ng-show="dateFilterSelect.includes(\'1\')"\n      md-open-on-focus ng-model="dateFilter" md-placeholder="Ingrese la fecha"></md-datepicker>\n    </div>\n  </md-card> --> <mdt-table sortable-columns="true" animate-sort-icon="true" paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,50]}" mdt-row-paginator="refreshTable(page, pageSize)" mdt-row-paginator-error-message="Hubo un error al cargar los movimientos." mdt-row-paginator-no-results-message="No hubo resultados de la busqueda." mdt-trigger-request="getLoadResultsCallback(loadPageCallback)" mdt-translations="{\n    \'rowsPerPage\': \'Filas:\'\n    }" mdt-row="{\n      \'table-row-id-key\': \'id\',\n      \'column-keys\': [\n      \'datetime\',\n      \'employee_name\',\n      \'profile_name\',\n      \'totalCashIn\',\n      \'totalCashOut\',\n      \'totalDrugsIn\',\n      \'totalDrugsOut\',\n      \'id\'\n      ],\n    }"> <mdt-header-row> <mdt-column align-rule="left">Fecha</mdt-column> <mdt-column align-rule="left">Colaborador</mdt-column> <mdt-column align-rule="left">Paciente/Donador</mdt-column> <mdt-column align-rule="left">+D</mdt-column> <mdt-column align-rule="left">-D</mdt-column> <mdt-column align-rule="left">+M</mdt-column> <mdt-column align-rule="left">-M</mdt-column> <mdt-column align-rule="left">Ver</mdt-column> </mdt-header-row> <mdt-custom-cell column-key="datetime"> <span>{{value|date: \'shortDate\'}}</span><br> <span>{{value|date: \'shortTime\'}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="totalCashIn"> <span ng-show="{{value}}">{{value| currency}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="totalCashOut"> <span ng-show="{{value}}">{{value| currency}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="employee_name"> <ae-profile-icon name="{{value}}" size="32" id="{{::clientScope.idOfEmployee(rowId)}}"></ae-profile-icon> <span class="height-48">{{value}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="profile_name"> <ae-profile-icon name="{{value}}" size="32" id="{{::clientScope.idOfProfile(rowId)}}"></ae-profile-icon> <span class="height-48">{{value}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="id" aria-label="More"> <mdt-button id="movement" ng-click="$root.showDialog($event, this)" icon="more"></mdt-button> </mdt-custom-cell> </mdt-table> </div>'),a.put("views/newvisit.html",'<div> <!-- This simple div is needed --> <div class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">local_hospital</md-icon> <span class="truncate-ellipsis-xs filter-header pad-1 no-pad-xs"><span hide show-gt-xs>Nueva </span>Consulta</span> <span flex></span> <md-button class="filter-button-xs md-warn" ng-click="cancel()"> <md-icon>refresh</md-icon> <span hide show-gt-xs>Cancelar</span> <md-tooltip md-delay="500">Borrar todos los campos</md-tooltip> </md-button> <md-button class="filter-button-xs md-primary" ng-disabled="newVisitForm.$invalid || newVisitForm.$pristine" ng-click="done()"> <md-icon>done</md-icon> <span hide show-gt-xs>Guardar</span> <md-tooltip md-delay="500">Guarda la consulta</md-tooltip> </md-button> </div> </div> </div> <md-card class="no-margin"> <md-card-content flex layout="column" class="no-pad-xs"> <form name="newVisitForm" ng-submit="done()" novalidate> <div layout="row"> <ae-profile-icon ng-if="selectedItemPeople.first_name" name="{{selectedItemPeople.first_name}}" size="72" id="{{selectedItemPeople.id}}"></ae-profile-icon> <md-autocomplete md-input-name="person" flex required md-selected-item="selectedItemPeople" md-search-text="filterTextP" md-require-match="true" md-items="item in peopleList()" md-item-text="itemText(item)" md-min-length="0" md-delay="1000" md-floating-label="Ingrese el nombre, apellido o DNI del paciente"> <md-item-template> <div ng-if="item.first_name"> <span class="item-title"> <ae-profile-icon ng-if="item.first_name" name="{{item.first_name}}" size="32" id="{{item.id}}"></ae-profile-icon> <span>{{item.first_name}}</span> </span> <span class="item-metadata"> <span class="item-metastat"> <strong>{{item.last_name}}</strong> </span> <span class="item-metastat" ng-if="item.dni"> - DNI: <strong>{{item.dni}}</strong> </span> </span> </div> <div layout="row"> <md-button flex id="profile" class="md-primary" aria-label="Person Add" ng-click="$root.showDialog($event, this)"> <md-icon>person_add</md-icon> <label>Añadir Persona</label> </md-button> </div> </md-item-template> <div ng-messages="newVisitForm.person.$error"> <div ng-message="required">Es necesario que elija un paciente.</div> <div ng-message="md-require-match">Esta persona no existe.</div> </div> </md-autocomplete> <md-button ng-disabled="!selectedItemPeople.id" class="md-icon-button md-primary height-auto" aria-label="More" id="profile" ng-click="goToDialog($event, selectedItemPeople.id)"> <md-icon>more_vert</md-icon> <md-tooltip>Detalles del paciente</md-tooltip> </md-button> </div> <div flex layout="row" layout-align="end center"> <i>{{date | date: "dd \'de\' MMMM yyyy - HH:mm"}}</i> </div> <div layout="row"> <md-input-container flex> <label>Detalles</label> <textarea name="detail" type="text" required ng-model="detail" rows="7"></textarea> <div ng-messages="newVisitForm.detail.$error"> <p ng-message="required">Este campo es requerido.</p> </div> </md-input-container></div>  <md-card-actions layout="row" layout-align="end center"> <md-button class="md-warn" ng-click="cancel()"> <md-icon>refresh</md-icon> Cancelar <md-tooltip>Borrar todos los campos</md-tooltip> </md-button> <md-button ng-disabled="newVisitForm.$invalid || newVisitForm.$pristine" class="md-primary" ng-click="done()"> <md-icon>done</md-icon> Guardar <md-tooltip>Guarda la consulta</md-tooltip> </md-button> </md-card-actions>  </form> </md-card-content> </md-card>'),a.put("views/profile.html",'<md-dialog> <div layout="row"> <md-toolbar layout="row"> <div class="md-toolbar-tools"> {{isNew() ? (isEmployeeForm ? \'Agregar Colaborador\' : \'Agregar Paciente\') : \'Editar Perfil\'}} </div> <div class="dialog-close"> <md-button ng-click="cancel()" class="md-icon-button"> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> </div> <md-divider></md-divider> <md-dialog-content class="md-padding" layout-xs="column" layout="row"> <div layout="column" layout-padding ng-cloak> <form name="profileForm" ng-submit="save()" autocomplete="nope" novalidate> <div ng-if="isEmployeeForm"> <br> <h2 class="md-title">Información de Cuenta</h2> <small class="blue-grey-text">ID #{{person.id}}</small> <br><br> <div layout="column" layout-gt-xs="row"> <md-input-container flex="50"> <label>Nombre de Usuario</label> <md-icon class="md-primary">account_circle</md-icon> <input name="username" autocomplete="off" ng-model="person.username" required> <div ng-messages="profileForm.username.$error"> <div ng-message="required">Campo obligatorio</div> </div> </md-input-container> <md-input-container flex="50"> <label>Nueva Contraseña</label> <md-icon class="md-primary">lock</md-icon> <input name="password" ng-model="person.password" type="password"> </md-input-container> <md-input-container flex="50"> <label>Repita Contraseña</label> <md-icon class="md-primary">lock_outline</md-icon> <input name="repeatPassword" ng-model="person.repeatPassword" type="password"> </md-input-container> </div> <h3 class="md-subhead">Cargo...</h3> <md-input-container class="md-block"> <md-select name="charge" required ng-model="person.charge" placeholder="Seleccione cargo"> <md-option value="doctor">Doctor/a</md-option> <md-option value="secretary">Secretario/a</md-option> </md-select> <div ng-messages="profileForm.charge.$error"> <div ng-message="required">Este campo es obligatorio</div> </div> </md-input-container> <h3 class="md-subhead">{{person.charge === \'doctor\' ? \'Asistido por\' : \'Asiste a\'}}</h3> <md-grid-list> <md-checkbox value="{{e.id}}" class="md-primary" ng-checked="isChecked(e.id)" ng-repeat="e in allEmployees | filter: {charge: shouldBeAssistedBy(person.charge)}" ng-click="assistEdSelection(e.id)"> <span>{{ e.profile.first_name }}</span> <span ng-if="e.profile.last_name">{{ " " + e.profile.last_name }}</span> </md-checkbox> </md-grid-list> <span md-colors="{color:\'accent\'}" ng-show="person.charge === \'doctor\' && (allEmployees | filter: {charge: \'secretary\'}).length === 0">{{(allEmployees | filter: {charge: \'secretary\'}).length}}No hay ningún/a secretario/a que le pueda asistir.</span> <span md-colors="{color:\'accent\'}" ng-show="person.charge === \'secretary\' && (allEmployees | filter: {charge: \'doctor\'}).length === 0">No hay ningún/a doctor/a a quién asistir.</span> </div> <!-- PROFILE FORM --> <div ng-if="!isEmployeeForm"> <br> <h2 class="md-title">Información Personal</h2> <small class="blue-grey-text">ID #{{person.id}} - Creado el {{person.creation_datetime|date:"dd/MM/yyyy \'a las\' hh:mm"}}.</small> <br><br> <div layout="column" layout-gt-xs="row"> <md-input-container flex="50"> <label>Nombre</label> <md-icon class="md-primary">person</md-icon> <input required name="firstName" ng-model="person.first_name" md-maxlength="128" capitalize-first> <div ng-messages="profileForm.firstName.$error"> <div ng-message="required">Campo obligatorio</div> </div> </md-input-container> <md-input-container flex="50"> <label>Apellido</label> <md-icon class="md-primary">face</md-icon> <input name="lastName" ng-model="person.last_name" md-maxlength="128"> </md-input-container> <md-input-container flex="50"> <label>DNI</label> <md-icon class="md-primary">chrome_reader_mode</md-icon> <input name="dni" type="number" ng-model="person.dni" max="2147483648" min="0"> <div ng-messages="profileForm.dni.$error"> <div ng-message="number">Ingrese solo números enteros</div> </div> </md-input-container> </div> <div layout="column" layout-gt-xs="row"> <md-input-container class="md-block" flex="100"> <label>Email</label> <md-icon class="md-primary">mail</md-icon> <input name="email" type="email" ng-model="person.email"> <div ng-messages="profileForm.email.$error"> <div ng-message="email">Debe ingresar un mail valido.</div> </div> </md-input-container> <md-input-container class="md-block" flex="50"> <label>Edad</label> <md-icon class="md-primary">date_range</md-icon> <input name="age" type="number" ng-model="person.age" pattern="[0-9]+"> <div ng-messages="profileForm.age.$error"> <div ng-message="number">Debe ingresar una edad valida.</div> <div ng-message="pattern">Debe ingresar números enteros sin letras o comas</div> </div> </md-input-container> <br> </div> <div layout="column" layout-gt-xs="row"> <md-input-container class="md-block" flex="100"> <label>Dirección</label> <md-icon class="md-primary">location_on</md-icon> <input name="address" ng-model="person.address" md-maxlength="256"> </md-input-container> <md-input-container class="md-block" flex="50"> <label>Mutual</label> <md-icon class="md-primary">local_hospital</md-icon> <input name="healthcare" ng-model="person.healthcare" md-maxlength="256"> </md-input-container> <br> </div> <div layout="column" layout-gt-xs="row"> <md-input-container class="md-block" flex="50"> <label>Número de teléfono</label> <md-icon class="md-primary">phone</md-icon> <input name="phone" ng-model="person.phone" md-maxlength="50"> </md-input-container> <md-input-container class="md-block" flex="50"> <label>Número de celular</label> <md-icon class="md-primary">phone</md-icon> <input name="cellphone" ng-model="person.cellphone" md-maxlength="50"> </md-input-container></div>  </div> <!-- XXX CODIG RANCIO BORRAR ESTO ESTA DUPLICANDO LO ANTERIOR PERO CON PERSON.PROFILE --> <div ng-if="isEmployeeForm"> <h2 class="md-title">Información Personal</h2> <small class="blue-grey-text">ID #{{person.profile.id}} - Creado el {{person.profile.creation_datetime|date:"dd/MM/yyyy \'a las\' hh:mm"}}.</small> <br><br> <div layout="column" layout-gt-xs="row"> <md-input-container flex="50"> <label>Nombre</label> <md-icon class="md-primary">person</md-icon> <input required name="firstName" ng-model="person.profile.first_name" md-maxlength="128" capitalize-first> <div ng-messages="profileForm.firstName.$error"> <div ng-message="required">Campo obligatorio</div> </div> </md-input-container> <md-input-container flex="50"> <label>Apellido</label> <md-icon class="md-primary">face</md-icon> <input name="lastName" ng-model="person.profile.last_name" md-maxlength="128"> </md-input-container> <md-input-container flex="50"> <label>DNI</label> <md-icon class="md-primary">chrome_reader_mode</md-icon> <input name="dni" type="number" ng-model="person.profile.dni" max="2147483648" min="0"> <div ng-messages="profileForm.dni.$error"> <div ng-message="number">Ingrese solo números enteros</div> </div> </md-input-container> </div> <div layout="column" layout-gt-xs="row"> <md-input-container class="md-block" flex="50"> <label>Email</label> <md-icon class="md-primary">mail</md-icon> <input name="email" type="email" ng-model="person.profile.email"> <div ng-messages="profileForm.email.$error"> <div ng-message="email">Debe ingresar un mail valido.</div> </div> </md-input-container> <md-input-container class="md-block" flex="50"> <label>Edad</label> <md-icon class="md-primary">date_range</md-icon> <input name="age" type="number" ng-model="person.profile.age" pattern="[0-9]+"> <div ng-messages="profileForm.age.$error"> <div ng-message="number">Debe ingresar una edad valida.</div> <div ng-message="pattern">Debe ingresar números enteros sin letras o comas</div> </div> </md-input-container> <br> </div> <div layout="column" layout-gt-xs="row"> <md-input-container class="md-block" flex="100"> <label>Dirección</label> <md-icon class="md-primary">location_on</md-icon> <input name="address" ng-model="person.profile.address" md-maxlength="256"> </md-input-container> <md-input-container class="md-block" flex="50"> <label>Mutual</label> <md-icon class="md-primary">local_hospital</md-icon> <input name="healthcare" ng-model="person.profile.healthcare" md-maxlength="256"> </md-input-container> <br> </div> <div layout="column" layout-gt-xs="row"> <md-input-container class="md-block" flex="50"> <label>Número de teléfono</label> <md-icon class="md-primary">phone</md-icon> <input name="phone" ng-model="person.profile.phone" md-maxlength="50"> </md-input-container> <md-input-container class="md-block" flex="50"> <label>Número de celular</label> <md-icon class="md-primary">phone</md-icon> <input name="cellphone" ng-model="person.profile.cellphone" md-maxlength="50"> </md-input-container></div>  </div> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-warn" ng-hide="isNew()" ng-click="delete()" layout-align="start center"> <label>Eliminar</label> <md-icon>delete</md-icon> </md-button> <md-button ng-click="cancel()" layout-align="end center"> <label>Cancelar</label> <md-icon>cancel</md-icon> </md-button> <md-button ng-disabled="profileForm.$invalid || profileForm.$pristine" class="md-primary" ng-click="save()" layout-align="end center"> <label>Guardar</label> <md-icon>save</md-icon> </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/profiles.html",'<div class="profilesTable"> <div ng-hide="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">format_list_bulleted</md-icon> <span class="truncate-xs filter-header"><span hide show-gt-xs>Lista de</span> Pacientes</span> <span flex></span> <div class="filter-search" layout="row" hide show-gt-xs> <md-icon>search</md-icon> <md-input-container md-no-float class="md-toolbar-tools"> <input flex ng-model="filterText" placeholder="Buscar pacientes..." type="text"> </md-input-container> </div> <md-button hide show-xs class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>search</md-icon> <md-tooltip md-delay="500">Busca un paciente</md-tooltip> </md-button> <md-button class="filter-button md-primary" id="profile" ng-click="$root.showDialog($event)"> <md-icon>person_add</md-icon> <md-tooltip md-delay="500">Agrega un nuevo paciente</md-tooltip> </md-button> </div> </div> <div ng-show="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-search-icon">search</md-icon> <md-input-container md-no-float class="md-toolbar-tools md-input-container-xs"> <input id="mobileSearch" flex ng-model="filterText" placeholder="Buscar" type="text"> </md-input-container> <md-button class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>close</md-icon> <md-tooltip md-delay="500">Cancelar busqueda</md-tooltip> </md-button> </div> </div> <mdt-table sortable-columns="true" animate-sort-icon="true" paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,50]}" mdt-row-paginator="refreshTable(page, pageSize)" mdt-row-paginator-error-message="Hubo un error al cargar las personas." mdt-row-paginator-no-results-message="No hubo resultados de la busqueda." mdt-trigger-request="getLoadResultsCallback(loadPageCallback)" mdt-translations="{\n      \'rowsPerPage\': \'Filas:\'\n    }" mdt-row="{\n    \'table-row-id-key\': \'id\',\n    \'column-keys\': [\n    \'first_name\',\n    \'last_name\',\n    \'dni\',\n    \'id\',\n    \'hc\'\n    ],\n  }"> <mdt-header-row> <mdt-column align-rule="left">Nombre</mdt-column> <mdt-column align-rule="left">Apellido</mdt-column> <mdt-column align-rule="left">DNI</mdt-column> <mdt-column align-rule="left">Editar</mdt-column> <mdt-column align-rule="left">H. Clínica</mdt-column> </mdt-header-row> <mdt-custom-cell column-key="first_name"> <ae-profile-icon id="{{rowId}}" name="{{value}}" size="32"></ae-profile-icon> <span class="height-48">{{value}}</span> </mdt-custom-cell> <mdt-custom-cell column-key="id"> <mdt-button id="profile" value="{{value}}" ng-click="$root.showDialog($event, this)" icon="edit"></mdt-button> </mdt-custom-cell> <mdt-custom-cell column-key="hc"> <mdt-button id="history" ng-click="clientScope.cHistory($event)" icon="description"></mdt-button> </mdt-custom-cell> </mdt-table> </div>'),a.put("views/register.html",'<div class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">web</md-icon> <span class="truncate-ellipsis-xs filter-header">Caja Registradora</span> <span class="row-4-gt-xs" flex></span> <md-button class="filter-text-button md-primary" ng-click="goToMovements()"> <span hide show-gt-xs>Mostrar Movimientos</span> <md-icon>arrow_forward</md-icon> <md-tooltip md-delay="500">Muestra las entradas y salidas de medicamentos y dinero</md-tooltip> </md-button> </div> </div> <form name="registerForm" ng-submit="done()" novalidate> <md-card class="vertical-marg-0-5 no-margin-xs"> <md-card-title> <div layout="column"> <span class="md-headline">Ingrese un Nombre</span> </div> </md-card-title> <md-card-content> <div layout="row"> <ae-profile-icon ng-if="selectedItemPeople.first_name" name="{{selectedItemPeople.first_name}}" size="72" id="{{selectedItemPeople.id}}"></ae-profile-icon> <md-autocomplete flex required md-selected-item="selectedItemPeople" md-require-match="true" md-input-name="person" md-search-text="filterTextP" md-items="item in peopleList()" md-item-text="itemText(item)" md-min-length="0" md-delay="1000" md-no-cache="true" md-floating-label="Persona a tratar"> <md-item-template> <div ng-if="item.first_name"> <span class="item-title"> <ae-profile-icon ng-if="item.first_name" name="{{item.first_name}}" size="32" id="{{item.id}}"></ae-profile-icon> <span>{{item.first_name}}</span> </span> <span class="item-metadata"> <span class="item-metastat"> <strong>{{item.last_name}}</strong> </span> <span class="item-metastat" ng-if="item.dni"> - DNI: <strong>{{item.dni}}</strong> </span> </span> </div> <div layout="row"> <md-button flex id="profile" class="md-primary" aria-label="Person Add" ng-click="$root.showDialog($event, this)"> <md-icon>person_add</md-icon> <label>Añadir Persona</label> </md-button> </div> </md-item-template> <div ng-messages="registerForm.person.$error"> <div ng-message="required">Seleccione o agregue a la persona a tratar.</div> <div ng-message="md-require-match">Esta persona no existe.</div> </div> </md-autocomplete> </div> </md-card-content> </md-card> <md-card class="vertical-marg-0-5 no-padding item-card" ng-repeat="action in nActions"> <md-card-content layout-padding layout="row" layout-align="none center"> <md-button class="md-fab stick-button" aria-label="more" ng-click="addAction()" ng-show="$last"> <md-icon>add</md-icon> <md-tooltip md-delay="500">Agregar un nuevo item a la transacción</md-tooltip> </md-button> <ae-profile-icon letter="{{$index + 1}}" size="56"></ae-profile-icon> <md-input-container class="item-capital"> <md-select name="capital" required ng-model="action.capital" placeholder="Capital" class="md-no-underline"> <md-option value="0">Medicamento</md-option> <md-option value="1">Dinero</md-option> </md-select> <div ng-messages="registerForm.capital.$error"> <div ng-message="required">Tipo de intercambio</div> </div> </md-input-container> <span ng-show="showOrHide(action.capital)">$</span> <md-autocomplete class="item-drug-name" required ng-if="!showOrHide(action.capital)" md-require-match="true" md-input-name="drug" md-selected-item="action.drug" md-search-text="filterTextM" md-items="drug in drugList()" md-item-text="drug.name" md-min-length="0" md-delay="1000" md-no-cache="true" md-floating-label="Nombre del Medicamento"> <md-item-template> <div ng-if="drug.name"> <span class="drug-title"> <md-icon>healing</md-icon> <span>{{drug.name}}</span> </span> <span class="drug-metadata"> <span class="drug-metastat"> <strong>({{drug.quantity}})</strong> </span> </span> </div> <div layout="row"> <md-button id="drug" flex class="md-primary" aria-label="Drug Add" ng-click="goToDialog($event, nActions.indexOf(action))"> <md-icon>add_box</md-icon> <label>Añadir</label> </md-button> </div> </md-item-template> <div ng-messages="registerForm.drug.$error"> <div ng-message="required">Seleccione o agregue el medicamento</div> <div ng-message="md-require-match">Este medicamento no existe.</div> </div> </md-autocomplete> <md-input-container class="item-quantity"> <label>Cantidad</label> <input name="quantity" required ng-model="action.quantity" type="number" min="0"> <div ng-messages="registerForm.quantity.$error"> <div ng-message="required">¿Cuanto/s?</div> <div ng-message="number">Introduzca sólo números.</div> <div ng-message="min">Introduzca sólo números positivos.</div> </div> </md-input-container> <md-input-container class="item-type"> <md-select required name="type" ng-model="action.type" placeholder="Tipo" class="md-no-underline"> <md-option value="1">Ingreso</md-option> <md-option value="0">Egreso</md-option> </md-select> <div ng-messages="registerForm.type.$error"> <div ng-message="required">Ingreso/Egreso</div> </div> </md-input-container> <md-input-container class="item-details" flex> <label>Detalles</label> <input name="detail" ng-model="action.detail" md-maxlength="100"> <div ng-messages="registerForm.detail.$error"> <div ng-message="md-maxlength">La descripción es muy larga.</div> </div> </md-input-container> <md-button class="item-delete md-icon-button md-warn" aria-label="deleteRow" ng-click="deleteAction(action)"> <md-icon>close</md-icon> <md-tooltip md-delay="500">Elimine este item</md-tooltip> </md-button> </md-card-content> </md-card> <div layout="row"> <span flex></span> <md-card class="register-menu" md-whiteframe="4"> <md-card-actions layout-align="end center"> <md-button class="md-warn" ng-click="cancel()"> <md-icon>refresh</md-icon> <md-tooltip md-delay="500">Cancelar transacción y empezar de nuevo</md-tooltip> Cancelar </md-button> <md-button class="md-primary" ng-disabled="registerForm.$invalid||registerForm.$pristine" ng-click="done()"> <md-icon>done</md-icon> <md-tooltip md-delay="500">Proceder a guardar la transacción</md-tooltip> Aceptar </md-button> </md-card-actions> </md-card> <span flex></span> </div> </form> <div id="bottom"></div>'),a.put("views/stock.html",'<div class="stockTable"> <div ng-hide="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-icon">format_list_bulleted</md-icon> <span class="truncate-ellipsis-xs filter-header"><span hide show-gt-xs>Lista de</span> Medicamentos</span> <span flex></span> <div class="filter-search" layout="row" hide show-gt-xs> <md-icon>search</md-icon> <md-input-container md-no-float class="md-toolbar-tools"> <input flex ng-model="filterText" placeholder="Comience a escribir aquí" type="text"> </md-input-container> </div> <md-button hide show-xs class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>search</md-icon> <md-tooltip md-delay="500">Busca un medicamento</md-tooltip> </md-button> <md-button class="filter-button md-primary" id="drug" ng-click="$root.showDialog($event)"> <md-icon>add</md-icon> <md-tooltip md-delay="500">Agrega un nuevo medicamento</md-tooltip> </md-button> </div> </div> <div ng-show="showMobileSearch" class="filter-wrapper"> <div layout="row" md-whiteframe="1" class="filter-container"> <md-icon class="filter-search-icon">search</md-icon> <md-input-container md-no-float class="md-toolbar-tools md-input-container-xs"> <input id="mobileSearch" flex ng-model="filterText" placeholder="Buscar" type="text"> </md-input-container> <md-button class="filter-button md-primary" ng-click="toggleMobileSearch()"> <md-icon>close</md-icon> <md-tooltip md-delay="500">Cancelar busqueda</md-tooltip> </md-button> </div> </div> <mdt-table table-card="{visible: false, title: \'Inventario\'}" selectable-rows="true" alternate-headers="\'contextual\'" delete-row-callback="deleteRowCallback(rows)" sortable-columns="true" animate-sort-icon="true" paginated-rows="{isEnabled: true, rowsPerPageValues: [5,10,20,50]}" mdt-row-paginator="refreshTable(page, pageSize)" mdt-row-paginator-error-message="Hubo un error al cargar el stock." mdt-row-paginator-no-results-message="No hubo resultados de la busqueda." mdt-trigger-request="getLoadResultsCallback(loadPageCallback)" mdt-translations="{\n    \'rowsPerPage\': \'Filas:\'\n    }" mdt-row="{\n    \'table-row-id-key\': \'id\',\n    \'column-keys\': [\n    \'name\',\n    \'quantity\',\n    \'description\',\n    \'id\',\n    ],\n  }"> <mdt-header-row> <mdt-column align-rule="left">Nombre</mdt-column> <mdt-column align-rule="left">Cantidad</mdt-column> <mdt-column align-rule="left">Detalle</mdt-column> <mdt-column align-rule="left">Editar</mdt-column> </mdt-header-row> <mdt-row> <mdt-custom-cell column-key="name" editable-field="smallEditDialog" editable-field-max-length="25"> {{value}} </mdt-custom-cell> <mdt-custom-cell column-key="quantity"> {{value}} </mdt-custom-cell> <mdt-custom-cell column-key="description"> {{value| limitTo: 50}}{{value.length > 100? \'...\': \'\'}} </mdt-custom-cell> <mdt-custom-cell column-key="id"> <mdt-button id="drug" value="{{value}}" ng-click="$root.showDialog($event, this)" icon="edit"></mdt-button> </mdt-custom-cell> </mdt-row> </mdt-table> </div>'),
a.put("views/visit.html",'<md-dialog> <div layout="row"> <md-toolbar layout="row"> <div class="md-toolbar-tools">Consulta</div> <div class="dialog-close"> <md-button ng-click="cancel()" class="md-icon-button"> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> </div> <md-divider></md-divider> <md-dialog-content layout="column" layout-padding flex> <div layout="row"> <p><b>Paciente: </b> <i ng-bind="visit.patient_name"></i></p> </div> <div layout="row"> <p><b>Profesional: </b> <i ng-bind="visit.doctor_name"></i></p> </div> <div layout="row"> <p><b>Fecha: </b> <i ng-bind="visit.datetime|date: \'dd MMMM yyyy HH:mm\'"></i></p> </div> <div layout="row" layout-align="space-between center"> <p><b>Detalles: </b></p> <md-button class="filter-button md-primary" ng-click="edit()"> <md-icon>border_color</md-icon> </md-button> </div> <form name="visitForm" submit="save()" novalidate> <md-input-container class="md-block dialog-text-area"> <label></label> <textarea name="detail" type="text" ng-model="visit.detail" ng-change="change()" rows="3" ng-disabled="enable" md-no-autogrow required></textarea> <div ng-messages="visitForm.detail.$error"> <p ng-message="required">Este campo es obligatorio.</p> </div> </md-input-container> </form> </md-dialog-content> <md-dialog-actions layout="row"> <md-button class="md-warn" ng-click="delete()" layout-align="start center"> <label>Eliminar</label> <md-icon>delete</md-icon> </md-button> <md-button ng-click="cancel()" layout-align="end center"> <label>Cancelar</label> <md-icon>cancel</md-icon> </md-button> <md-button class="md-primary" ng-click="save()" ng-disabled="visitForm.$invalid || visitForm.$pristine" layout-align="end center"> <label>Guardar</label> <md-icon>save</md-icon> </md-button> </md-dialog-actions> </md-dialog>')}]);